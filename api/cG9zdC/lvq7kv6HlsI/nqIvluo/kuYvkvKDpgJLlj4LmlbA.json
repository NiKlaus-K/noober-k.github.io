{"title":"微信小程序之参数传递","date":"2019-08-20T23:15:25.424Z","link":"post/微信小程序之传递参数","comments":true,"tags":["微信小程序"],"categories":["微信小程序"],"updated":"2019-08-23T09:25:55.319Z","content":"<h2 id=\"前言\">前言<a href=\"post/微信小程序之传递参数#前言\"></a></h2><ul>\n<li>在列表页面（<span style=\"color:#f59141;background-color:#f8f8f8;\"> list </span>）实现列表渲染的前提下，通过点击不同卡片（<span style=\"color:#f59141;background-color:#f8f8f8;\"> card </span>）时跳转到不同的详情页（<span style=\"color:#f59141;background-color:#f8f8f8;\"> detail </span>）</li>\n<li>关键字：<span style=\"background-color:#5bc0de;color:#fff;padding:3px 6px;border-radius:6px;\">data-variable</span>（variable代表变量名） <span style=\"background-color:#5bc0de;color:#fff;padding:3px 6px;border-radius:6px;\">wx.navigateTo</span>（导航）</li>\n</ul>\n<h2 id=\"源码\">源码<a href=\"post/微信小程序之传递参数#源码\"></a></h2><h3 id=\"list文件\">list文件<a href=\"post/微信小程序之传递参数#list文件\"></a></h3><h4 id=\"list-wxml\">list.wxml<a href=\"post/微信小程序之传递参数#list-wxml\"></a></h4><figure class=\"highlight html\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">view</span> <span class=\"attr\">wx:for</span>=<span class=\"string\">\"&#123;&#123;worker&#125;&#125;\"</span> <span class=\"attr\">wx:key</span>=<span class=\"string\">\"id\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">view</span> <span class=\"attr\">data-id</span>=<span class=\"string\">\"&#123;&#123;item.id&#125;&#125;\"</span> <span class=\"attr\">bindtap</span>=<span class=\"string\">\"click\"</span> &gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">view</span>&gt;</span>&#123;&#123; item.name &#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">view</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">view</span>&gt;</span>&#123;&#123; item.introduce &#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">view</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">view</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">view</span>&gt;</span></span><br></pre></td></tr></table></div></figure>\n\n<h4 id=\"list-js\">list.js<a href=\"post/微信小程序之传递参数#list-js\"></a></h4><figure class=\"highlight js\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Page(&#123;</span><br><span class=\"line\">    ....</span><br><span class=\"line\">    click:<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">e</span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// console.log('点击事件的e：',e); //在事件的currentTarget.dataset里会获取到设置的data-variable变量此处为data-id</span></span><br><span class=\"line\">        <span class=\"keyword\">var</span> workerId = e.currentTarget.dataset.id;</span><br><span class=\"line\">        wx.navigateTo(&#123;</span><br><span class=\"line\">            <span class=\"comment\">// 拼接url</span></span><br><span class=\"line\">            url: <span class=\"string\">'../worker/worker?title=worker&amp;id='</span> + workerId</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></div></figure>\n\n<p><img src=\"https://i.loli.net/2019/08/21/RCWKdv9Lwq18Iek.png\" alt=\"e.png\" class=\"article-img\"></p>\n<h3 id=\"detail文件\">detail文件<a href=\"post/微信小程序之传递参数#detail文件\"></a></h3><h3 id=\"detail-js\">detail.js<a href=\"post/微信小程序之传递参数#detail-js\"></a></h3><figure class=\"highlight js\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Page(&#123;</span><br><span class=\"line\">    ....</span><br><span class=\"line\">    <span class=\"comment\">// 生命周期函数--监听页面加载</span></span><br><span class=\"line\">    onLoad: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">options</span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// 括号内的options可以改名的，无影响</span></span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">'options: '</span>, options); <span class=\"comment\">//就是一个接收传递过来的参数的对象</span></span><br><span class=\"line\">        <span class=\"keyword\">this</span>.setData(&#123;</span><br><span class=\"line\">            id: options.id <span class=\"comment\">//给data里的id赋值</span></span><br><span class=\"line\">    \t&#125;)</span><br><span class=\"line\">    \t<span class=\"comment\">//console.log(this.data.id) //输出data的id，即为传过来的id值</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></div></figure>\n\n<p><img src=\"https://i.loli.net/2019/08/21/FYDbmNwrL532yiO.png\" alt=\"options.png\" class=\"article-img\"></p>\n<h3 id=\"实现效果\">实现效果<a href=\"post/微信小程序之传递参数#实现效果\"></a></h3><p><img src=\"https://i.loli.net/2019/08/21/PzhvkAHxj5Ul1cw.png\" alt=\"list.png\" class=\"article-img\"></p>\n<p><img src=\"https://i.loli.net/2019/08/21/lMmdW3PGXZY4as1.png\" alt=\"detail.png\" class=\"article-img\"></p>\n","prev":{"title":"文本溢出自动隐藏并显示省略号","link":"post/文本超出自动隐藏并显示省略号"},"next":{"title":"HTML之表单详解","link":"post/HTML之表单详解"},"plink":"http://noober-k.github.io/post/微信小程序之传递参数/","toc":[{"title":"前言","id":"前言","index":"1"},{"title":"源码","id":"源码","index":"2","children":[{"title":"list文件","id":"list文件","index":"2.1","children":[{"title":"list.wxml","id":"list-wxml","index":"2.1.1"},{"title":"list.js","id":"list-js","index":"2.1.2"}]},{"title":"detail.js","id":"detail-js","index":"2.2"},{"title":"实现效果","id":"实现效果","index":"2.3"}]}]}